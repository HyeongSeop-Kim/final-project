<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="moimParticipantsMapper">
  
   <select id ="selectDatas" resultType="moimParticipantsDTO">
SELECT B.MEMBER_NAME AS memberName
     , B.MEMBER_ID AS memberId
     , J.JOB_NAME AS JobName
     , J.JOB_ID AS jobId
  FROM MOIM M
  JOIN MOIM_PARTICIPANTS P 
    ON M.MOIM_ID = P.MOIM_ID
  JOIN MEMBERS B
    ON B.MEMBER_ID = P.MEMBER_ID 
  JOIN JOBS J
    ON P.JOB_ID = J.JOB_ID
    WHERE M.MOIM_ID IN (SELECT  P.MOIM_ID   
                        FROM MOIM_PARTICIPANTS P
                       WHERE P.MOIM_ID = #{id})
   </select>
</mapper>
